---
title: 数据库优化(一)：索引及索引合理利用
date: 2013-08-14 23:01:01
categories:
- 服务端开发
- Java
tags:
- 数据库
- 性能优化
---

**1、什么是索引**

索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可以快速访问数据库表中特定的信息。  
索引也是用来定位的。  
索引分为聚集索引和非聚集索引两种。
<!-- more -->
**2、索引的优点**

聚集索引是按照数据存放的物理位置为顺序的，而非聚集索引就不样了；聚集索引能提高多行检索的速度，而非聚集索引对单行索引的速度很快。
1. 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性；
2. 可以大大加快数据的检索速度，这也是创建索引的最主要的原因；
3. 可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义；
4. 在使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间；
5. 通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。

**3、索引的缺点**

一是增加了数据库的存储空间，二是在插入和修改数据时要花费较多的时间(因为索引也要随之变动)。
1. 创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加;
2. 索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚集索引，那么需要的空间就会更大。
3. 当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度。

**4、哪些列适合建索引？**

1）在经常需要搜索的列上，可以加快搜索的速度；  
2）在作为主键的列上，强制该列的唯一性和组织表中数据的排列结构；  
3）在经常用在连接的列上，这些列主要是一些外键，可以加快连接的速度；  
4）在经常需要根据范围进行搜索的列上创建索引，因为索引已经排序，其指定的范围是连续的；  
5）在经常需要排序的列上创建索引，因为索引已经排序，这样查询可以利用索引的排序，加快排序查询时间；  
6）在经常使用在WHERE子句中的列上面创建索引，加快条件的判断速度。  

**5、不应该创建索引的的这些列具有下列特点**
1）对于那些在查询中很少使用或者参考的列不应该创建索引。这是因为，既然这些列很少使用到，因此有索引或者无索引，并不能提高查询速度。相反，由于增加了索引，反而降低了系统的维护速度和增大了空间需求。

2）对于那些只有很少数据值的列也不应该增加索引。这是因为，由于这些列的取值很少，例如人事表的性别列，在查询的结果中，结果集的数据行占了表中数据行的很大比例，即需要在表中搜索的数据行的比例很大。增加索引，并不能明显加快检索速度。

3）对于那些定义为text, image和bit数据类型的列不应该增加索引。这是因为，这些列的数据量要么相当大，要么取值很少,不利于使用索引。

4）当修改性能远远大于检索性能时，不应该创建索引。这是因为，修改性能和检索性能是互相矛盾的。当增加索引时，会提高检索性能，但是会降低修改性能。当减少索引时，会提高修改性能，降低检索性能。因此，当修改操作远远多于检索操作时，不应该创建索引。